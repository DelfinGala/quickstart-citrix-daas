// Include any postdeployment steps here, such as steps necessary to test that the deployment was successful. If there are no postdeployment steps, leave this file empty.

== Postdeployment steps

=== Connect to the instances deployed by the Quick Start
The Quick Start deploys the following EC2 instances to your AWS account:

* One Remote Desktop Gateway host (RD Gateway)
* Two Citrix Cloud Connectors
* One Citrix Virtual Delivery Agent (VDA)

The Citrix Cloud Connector and VDA EC2 instances do not have public IP addresses. To connect to them, first use Remote Desktop to connect to the RD Gateway instance. Then use Remote Desktop on the RD Gateway to connect to the private IP address of the desired EC2 instance.

==== Connect to the RD Gateway instance

. Sign in to the https://us-east-1.console.aws.amazon.com/console/home?region=us-east-1#[AWS Management Console] and open the CloudFormation console.
. In the left navigation pane, choose *Stacks*.
. On the *Stacks* page, choose the Citrix DaaS stack.
. Choose the *Outputs* tab. Note the following values:
** *BastionHostEIP* –  RD Gateway IP address.
** *DomainAdmin* – User name to log in to the RD Gateway.
** *DomainAdminPassword* – Password to log in to the RD Gateway.
. Using Remote Desktop, connect to the RD Gateway *BastionHostEIP* address. Use the *DomainAdmin* user name and *DomainAdminPassword* password to log in.

==== Connect to a Citrix Cloud Connector or VDA instance

. Sign in to the https://us-east-1.console.aws.amazon.com/console/home?region=us-east-1#[AWS Management Console] and open the EC2 console.
. In the left navigation pane, choose *Instances*.
. On the *Instances* page, choose the EC2 instance.
. Choose the *Networking* tab. Note the private IP address.
. Use Remote Desktop on the RD Gateway to connect to the private IP addresses of the EC2 instance.

=== Explore the Resources Created in Your Citrix Cloud Tenant
This Quick Start creates the following resources in your Citrix Cloud tenant, many of which you can customize. To access them, log into the https://citrix.cloud.com/[Citrix Cloud management console^].

* A resource location for each deployment. The resource location name includes the Deployment ID generated by the Quick Start. This unique value is included in the name of many of the resources the Quick Start creates. In the example shown in <<postdeploy1>> the Deployment ID is `0ew8`.

+
[#postdeploy1]
.Quick Start Citrix resource location
image::../docs/deployment_guide/images/citrix_resource_location.png[Citrix resource location]

+
The resource location contains the two Citrix Cloud Connector instances created by the Quick Start template.

+
[#postdeploy2]
.Quick Start Citrix Cloud Connectors
image::../docs/deployment_guide/images/citrix_cloud_connectors.png[Citrix resource location]

+
When a resource location is created, the Active Directory to which the Citrix Cloud Connectors are joined is automatically added to the list of available domains in the Citrix Cloud tenant. To see this list of domains in the Citrix Cloud management console, choose *Identity and Access Management*, and then choose https://us.cloud.com/identity/domains[Domains^].

+
You can see that the `qstest.com forest/domain` (the name chosen for this Quick Start sample deployment) is now available in the Citrix Cloud tenant.

+
[#postdeploy3]
.Citrix Cloud tenant domains
image::../docs/deployment_guide/images/tenant_domains.png[Citrix domains]

* A Hosting Connection and a Hosting Resource to provision and manage the VDA with Citrix DaaS. For more information, refer to https://docs.citrix.com/en-us/citrix-virtual-apps-desktops-service/install-configure/connections.html[Create and manage connections^].

+
[#postdeploy4]
.Citrix Cloud hosting connection
image::../docs/deployment_guide/images/hosting_connections.png[Hosting connections]

* One VDA deployed to a single Windows Server 2016 EC2 instance. Virtual applications and desktops are installed to and delivered from this EC2 instance.

* One manually provisioned, power-managed machine catalog based on Windows Server 2016. Machine catalogs typically contain one or more identically configured VDAs that share the properties of the machine catalog. For more information, refer to https://docs.citrix.com/en-us/citrix-virtual-apps-desktops-service/install-configure/machine-catalogs-create.html[Create machine catalogs^].

+
[#postdeploy5]
.Citrix Cloud machine catalog
image::../docs/deployment_guide/images/machine_catalog.png[Machine catalog]

+
The Quick Start template adds the VDA instance it creates to the machine catalog it creates.

+
[#postdeploy6]
.Citrix Cloud VDA
image::../docs/deployment_guide/images/vda.png[Citrix VDA]

* One Delivery Group available to all authenticated users. Virtual applications and desktops are defined by Delivery Groups. Delivery Groups have a number of attributes associated with them, including apps, desktops, users, and machine catalogs. For more information, refer to https://docs.citrix.com/en-us/citrix-virtual-apps-desktops-service/install-configure/delivery-groups-create.html[Create delivery groups^].

+
[#postdeploy7]
.Citrix Cloud delivery group
image::../docs/deployment_guide/images/delivery_group.png[Citrix Cloud delivery group]

* Two sample applications and a published desktop delivered from the machine catalog.

+
[#postdeploy8]
.Citrix Cloud defined applications
image::../docs/deployment_guide/images/sample_applications.png[sample applications]

+
[#postdeploy9]
.Citrix Cloud published desktop
image::../docs/deployment_guide/images/published_desktop.png[published desktop]

=== Test Your Citrix DaaS Deployment

This Quick Start template is designed to create a fully functional deployment. After the deployment is complete, you should be able to navigate to the Citrix Workspace for your Citrix Cloud tenant, log in with appropriate credentials, and connect to the published applications or desktop.

To test your deployment, first identify the URL of your Citrix Workspace. In the Citrix Cloud management console, choose https://us.cloud.com/workspaceconfiguration/access[Workspace Configuration^]. The Workspace URL will look something like the following:
// TODO: information not accessible by users of screen readers
[#postdeploy10]
.Citrix Cloud Workspace URL
image::../docs/deployment_guide/images/workspace_url.png[workspace_url]

This URL can be used by either the Citrix Workspace app or a web browser to access Citrix DaaS created by this Quick Start template. After you are connected, log in with a valid Active Directory user:

[#postdeploy11]
.Citrix Cloud Workspace login
image::../docs/deployment_guide/images/workspace_login.png[workspace_login]

After you log in, you will see the two sample published apps and an AWS QuickStart Desktop.

[#postdeploy12]
.Citrix Cloud Workspace published apps and desktop
image::../docs/deployment_guide/images/workspace_apps.png[workspace_apps]

== Customizing Your Citrix DaaS Deployment on AWS
This Quick Start deploys a reference architecture that can be customized. As you’ve seen here, this Quick Start template creates a fully functional system in about 90
minutes, but you need to customize the Delivery Group to match the organization’s needs. You can also install additional applications on the VDA by remotely connecting to the instance as an administrator.

Common next steps and system customizations include:

* Modifying published applications or desktops (to remove defaults, add new apps, filter access to the resources by Active Directory user or group, etc.). This can be done on the Manage tab of Citrix DaaS in the Citrix Cloud management console. The Delivery Group properties are a great place to start.
* Configuring https://docs.citrix.com/en-us/citrix-virtual-apps-desktops/manage-deployment/user-profiles.html[Citrix User Profile Management^]. Citrix DaaS includes a component called User Profile Management (UPM), which allows you to manage roaming user profiles in a high-performance, flexible manner. For more information on use cases and configuration of Citrix UPM.
* Provisioning and configuring the https://docs.citrix.com/en-us/workspace-environment-management/service.html[Citrix Workspace Environment Manager^] service. The Citrix Workspace Environment Manager service uses intelligent resource management and User Profile Management technologies to deliver competitive performance, desktop logon, and application response times for Citrix DaaS deployments. It is a software-only, driver-free solution, requiring only a lightweight agent to be installed on your VDA.
* Creating a https://docs.citrix.com/en-us/citrix-virtual-apps-desktops-service/install-configure/machine-catalogs-create.html#prepare-a-master-image-on-the-hypervisor-or-cloud-service[master image^] VDA template instance, and deploying any number of additional instances based on the master image with Machine Creation Services. This is a more complex process, but it allows you to provision and version-manage instances at scale.
* Deploying https://www.citrix.com/networking/[advanced networking capabilities^] into the system. Citrix is also an provider of networking services, including a mix of sophisticated networking appliances and networking-related web services. You might be interested in one or more of the following:
** https://www.citrix.com/products/citrix-adc/[Citrix ADC^] VPX (formerly known as NetScaler ADC), virtual appliance-based application delivery controller, performs application-specific traffic analysis to intelligently distribute, optimize, and secure Layer 4-Layer 7 (L4–L7) network traffic for web applications. It provides a broad range of services from sophisticated load balancing and SSL offload to advanced authentication, application firewalling, and more. Design and deployment guidance can be found in the https://www.citrix.com/content/dam/citrix/en_us/documents/reference-material/validated-reference-design-netscaler-and-amazon-aws.pdf[Citrix documentation].
** https://www.citrix.com/products/citrix-gateway/[Citrix Gateway^] VPX (formerly known as Citrix NetScaler Unified Gateway) provides a comprehensive, secure remote access solution to a variety of different applications, effectively consolidating remote access infrastructure and providing secure single sign-on to Citrix virtual apps and desktops, Remote Desktop Protocol (RDP), web, and SaaS applications. One common use case with the Citrix Workspace is leveraging Citrix Gateway VPX on AWS to flexibly proxy ICA/HDX traffic (Citrix remote display protocol used by virtual apps and desktops) directly into the AWS VPC. Find more information on configuring Citrix Gateway VPX for use with Citrix Workspace in the https://support.citrix.com/article/CTX232640[Citrix documentation^].
** https://docs.citrix.com/en-us/citrix-gateway-service.html[Citrix Gateway Service^] is a secure remote access solution with diverse identity and Access Management (IdAM) capabilities, delivering a unified experience into Citrix DaaS and much more!
** https://docs.citrix.com/en-us/citrix-adc-cpx/current-release/about.html[Citrix ADC CPX^] is a container-based application delivery controller that can be provisioned on a Docker host. Citrix ADC CPX enables customers to leverage Docker engine capabilities and use Citrix ADC load balancing and traffic management features for container-based applications.
** https://www.citrix.com/products/citrix-web-app-firewall/[Citrix Web App Firewall^] protects web applications and sites from both known and unknown attacks, including application-layer and zero-day threats. It’s available as a standalone appliance or integrated with the Citrix ADC platform.
** https://www.citrix.com/products/citrix-secure-web-gateway/[Citrix Secure Web Gateway^] (formerly known as Citrix NetScaler Secure Web Gateway) is an effective, easy-to-use, high-performing web security solution with user behavior analytics. It leverages a combination of web services and customer managed appliances to help protect users from known and unknown web threats. It helps enforce company security policies on all outgoing web traffic, effectively protecting the company from known and unknown attacks while providing visibility and control over outbound web traffic.
** https://www.citrix.com/products/citrix-application-delivery-management/[Citrix Application Delivery Management^] is a centralized network management, analytics, and orchestration solution. From a single platform, administrators can view, automate, and manage network services for scale-out application architectures.
** https://www.citrix.com/products/citrix-intelligent-traffic-management/[Citrix Intelligent Traffic Management^] is based on recently acquired Cedexis technology. Our advanced traffic management improves user experience by harnessing big data and routing users to their requested content.